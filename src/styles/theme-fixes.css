/**
 * Theme Fixes for Pool Maintenance Application
 * 
 * Addresses contrast issues and ensures proper light theme defaults
 * High contrast colors optimized for outdoor pool environments
 */

@layer components {
  /* ============================================================================
   * FORCE LIGHT THEME DEFAULTS - OUTDOOR VISIBILITY PRIORITY
   * ============================================================================ */

  /* Using Tailwind's built-in bg-background class from config */

  /* Removed bg-border and border-border classes - using Tailwind defaults */

  /* Button variant utility classes - map to Crystal Waters theme */
  .bg-primary {
    background-color: hsl(var(--primary)) !important;
  }

  .text-primary-foreground {
    color: hsl(var(--primary-foreground)) !important;
  }

  .bg-secondary {
    background-color: hsl(var(--secondary)) !important;
  }

  .text-secondary-foreground {
    color: hsl(var(--secondary-foreground)) !important;
  }

  .bg-destructive {
    background-color: hsl(var(--destructive)) !important;
  }

  .text-destructive-foreground {
    color: hsl(var(--destructive-foreground)) !important;
  }

  /* Card component utility classes - map to Crystal Waters theme */
  .bg-card {
    background-color: hsl(var(--card)) !important;
  }

  .text-card-foreground {
    color: hsl(var(--card-foreground)) !important;
  }

  .text-muted-foreground {
    color: hsl(var(--muted-foreground)) !important;
  }

  /* Form input utility classes - map to Crystal Waters theme */
  .border-input {
    border-color: hsl(var(--input)) !important;
  }

  .bg-input {
    background-color: hsl(var(--input)) !important;
  }

  .border-ring {
    border-color: hsl(var(--ring)) !important;
  }

  .ring-ring {
    --tw-ring-color: hsl(var(--ring)) !important;
  }

  /* Dialog and overlay utility classes - map to Crystal Waters theme */
  .bg-accent {
    background-color: hsl(var(--accent)) !important;
  }

  .text-accent-foreground {
    color: hsl(var(--accent-foreground)) !important;
  }

  .ring-offset-background {
    --tw-ring-offset-color: hsl(var(--background)) !important;
  }

  /* Table utility classes - map to Crystal Waters theme */
  .bg-muted {
    background-color: hsl(var(--muted)) !important;
  }

  .bg-surface {
    background-color: #f1f5f9 !important;
  }

  /* Force high contrast text for outdoor reading - Deep Indigo */
  .text-foreground {
    color: #1a237e !important;
  }

  .text-card-foreground {
    color: #1a237e !important;
  }

  .text-muted-foreground {
    color: #5c6bc0 !important;
  }

  .text-secondary {
    color: #283593 !important;
  }

  /* ============================================================================
   * COMPONENT-SPECIFIC FIXES
   * ============================================================================ */

  /* Chemical Test Form - High Contrast for Safety */
  .chemical-test-form {
    background-color: var(--semantic-surface-primary);
    color: var(--semantic-text-primary);
  }

  .chemical-test-form .text-gray-600 {
    color: #475569 !important;
  }

  .chemical-test-form .text-gray-500 {
    color: #64748b !important;
  }

  /* Chemical History Timeline - Outdoor Optimized */
  .chemical-history-timeline {
    background-color: var(--semantic-surface-primary);
  }

  .chemical-history-timeline .text-gray-600 {
    color: #475569 !important;
  }

  /* Card Components - Enhanced Contrast */
  .card {
    background-color: var(--semantic-surface-elevated) !important;
    color: var(--semantic-text-primary) !important;
    border-color: var(--semantic-border-default) !important;
  }

  .card-header {
    color: #0f172a !important;
  }

  .card-content {
    color: #0f172a !important;
  }

  /* Button Components - Community Pool Theme */
  .btn-primary {
    background-color: var(--semantic-action-primary) !important;
    color: var(--semantic-text-primary) !important;
    border: none !important;
  }

  .btn-secondary {
    background-color: #f1f5f9 !important;
    color: #0f172a !important;
    border: 1px solid #cbd5e1 !important;
  }

  .btn-outline {
    background-color: transparent !important;
    color: #0f172a !important;
    border: 1px solid #cbd5e1 !important;
  }

  .btn-ghost {
    background-color: transparent !important;
    color: #334155 !important;
  }

  /* ============================================================================
   * SAFETY STATUS INDICATORS - MAXIMUM CONTRAST
   * ============================================================================ */

  /* Chemical Status Badges - Community Pool Theme */
  .status-safe {
    background-color: #e8f5e9 !important;
    color: #2e7d32 !important;
    border-color: #81c784 !important;
  }

  .status-caution {
    background-color: #fff3e0 !important;
    color: #e65100 !important;
    border-color: #ffcc80 !important;
  }

  .status-critical {
    background-color: #fbe9e7 !important;
    color: #bf360c !important;
    border-color: #ffab91 !important;
  }

  .status-emergency {
    background-color: #ffebee !important;
    color: #b71c1c !important;
    border: 2px solid #d32f2f !important;
    font-weight: 800 !important;
  }

  /* ============================================================================
   * FORM INPUT ELEMENTS - HIGH VISIBILITY
   * ============================================================================ */

  input,
  textarea,
  select {
    background-color: var(--semantic-surface-elevated) !important;
    color: var(--semantic-text-primary) !important;
    border: 1px solid var(--semantic-border-default) !important;
  }

  input:focus,
  textarea:focus,
  select:focus {
    border-color: #0ea5e9 !important;
    box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1) !important;
  }

  input::placeholder,
  textarea::placeholder {
    color: #94a3b8 !important;
  }

  /* Labels */
  label {
    color: #334155 !important;
    font-weight: 500 !important;
  }

  /* ============================================================================
   * TABLE AND DATA DISPLAY - OUTDOOR READABILITY
   * ============================================================================ */

  table {
    background-color: var(--semantic-surface-elevated) !important;
  }

  th {
    background-color: #f8fafc !important;
    color: #0f172a !important;
    font-weight: 600 !important;
  }

  td {
    color: #334155 !important;
  }

  tr:nth-child(even) {
    background-color: #f9fafb !important;
  }

  /* Timeline Components */
  .timeline-item {
    color: #0f172a !important;
  }

  .timeline-content {
    background-color: var(--semantic-surface-elevated) !important;
    color: var(--semantic-text-primary) !important;
    border-color: var(--semantic-border-default) !important;
  }

  /* ============================================================================
   * NAVIGATION AND MENUS - HIGH CONTRAST
   * ============================================================================ */

  nav {
    background-color: var(--semantic-surface-secondary) !important;
    border-color: var(--semantic-border-default) !important;
  }

  .nav-link {
    color: #334155 !important;
  }

  .nav-link:hover {
    background-color: #f1f5f9 !important;
    color: #0f172a !important;
  }

  .nav-link.active {
    background-color: var(--semantic-action-secondary) !important;
    color: var(--semantic-text-inverse) !important;
  }

  /* ============================================================================
   * DROPDOWN AND POPOVER FIXES
   * ============================================================================ */

  .dropdown-content,
  .popover-content {
    background-color: var(--semantic-surface-elevated) !important;
    color: var(--semantic-text-primary) !important;
    border: 1px solid var(--semantic-border-default) !important;
    box-shadow: var(--component-shadow-lg) !important;
  }

  .dropdown-item {
    color: #334155 !important;
  }

  .dropdown-item:hover {
    background-color: #f1f5f9 !important;
    color: #0f172a !important;
  }

  /* ============================================================================
   * ACCESSIBILITY ENHANCEMENTS
   * ============================================================================ */

  /* Focus states - highly visible for safety-critical operations */
  *:focus {
    outline: 2px solid #0ad1e0 !important;
    outline-offset: 2px !important;
  }

  /* High contrast mode improvements */
  @media (prefers-contrast: high) {
    .card,
    .input,
    .btn-outline {
      border-width: 2px !important;
    }

    .text-muted-foreground {
      color: #475569 !important;
    }

    .status-emergency {
      border-width: 3px !important;
    }
  }

  /* Reduced motion safety */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* ============================================================================
 * DARK MODE OVERRIDES - FOR INDOOR/EVENING USE
 * ============================================================================ */

.dark {
  /* Only apply dark mode when explicitly set, not by default */
}

.dark .bg-background {
  background-color: #0f172a !important;
}

.dark .text-foreground {
  color: #f8fafc !important;
}

.dark .card {
  background-color: #1e293b !important;
  color: #f8fafc !important;
  border-color: #334155 !important;
}

.dark .status-safe {
  background-color: #14532d !important;
  color: #bbf7d0 !important;
}

.dark .status-caution {
  background-color: #92400e !important;
  color: #fed7aa !important;
}

.dark .status-critical {
  background-color: #991b1b !important;
  color: #fecaca !important;
}

.dark .status-emergency {
  background-color: #7f1d1d !important;
  color: #fee2e2 !important;
  border-color: #b91c1c !important;
}
